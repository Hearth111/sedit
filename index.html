<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shinobi-Writer</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="app-header">
    <h1>Shinobi-Writer</h1>
    <div class="header-actions">
      <button id="mode-dual" class="active">デュアル</button>
      <button id="mode-editor">エディタのみ</button>
      <button id="mode-preview">プレビューのみ</button>
      <button id="btn-print">印刷 / PDF</button>
      <button id="btn-export-md">.md</button>
      <button id="btn-export-txt">.txt</button>
      <button id="btn-export-html">.html</button>
      <button id="btn-save-json">JSON保存</button>
      <label for="file-json" class="file-label">JSON読込</label>
      <input type="file" id="file-json" accept="application/json" />
    </div>
  </header>

  <main id="layout" class="layout dual-view">
    <aside class="left-panel">
      <section class="panel-block">
        <h2>ツールボックス</h2>
        <div class="tool-grid">
          <button data-insert="# シーン見出し\n">見出し</button>
          <button data-insert="> 描写\n">描写</button>
          <button data-insert="{{HO1}}\n">HO1</button>
          <button data-insert="{{SceneTable}}\n">シーン表</button>
          <button data-insert=":::secret 内容 :::\n">袋とじ</button>
          <button data-insert="{漢字}(ルビ)">ルビ</button>
          <button data-insert="---\n">改ページ</button>
          <button id="btn-copy-selection">選択コピー</button>
        </div>
      </section>

      <section class="panel-block">
        <h2>スニペット</h2>
        <div class="snippet-form">
          <input id="snippet-name" placeholder="名前" />
          <textarea id="snippet-content" placeholder="定型文"></textarea>
          <button id="btn-add-snippet">登録</button>
        </div>
        <ul id="snippet-list"></ul>
      </section>

      <section class="panel-block">
        <h2>目次</h2>
        <ul id="toc-list" class="toc-list"></ul>
      </section>

      <section class="panel-block">
        <h2>印刷設定</h2>
        <input id="scenario-title" placeholder="シナリオタイトル" />
        <input id="trailer-image" placeholder="トレーラー画像URL" />
        <textarea id="scenario-summary" placeholder="概要"></textarea>
      </section>

      <section class="panel-block">
        <h2>敵駒JSON（ココフォリア）</h2>
        <textarea id="enemy-data" placeholder='[{"name":"敵忍者","initiative":6,"hp":8}]'></textarea>
        <button id="btn-copy-enemy-json">敵駒JSONをコピー</button>
      </section>
    </aside>

    <section class="editor-panel">
      <h2>エディタ</h2>
      <textarea id="editor"></textarea>
    </section>

    <section class="preview-panel">
      <h2>簡易プレビュー</h2>
      <article id="preview" class="preview-content"></article>
    </section>
  </main>

  <template id="tpl-ho">
    <div class="ho-box" data-block>
      <h3>ハンドアウト</h3>
      <p><strong>使命:</strong> ここに使命を記述</p>
      <p><strong>秘密:</strong> ここに秘密を記述</p>
    </div>
  </template>

  <template id="tpl-scene-table">
    <table class="scenario-table" data-block>
      <thead><tr><th>d6</th><th>シーン</th></tr></thead>
      <tbody>
        <tr><td>1</td><td>雨の境内で密談する</td></tr>
        <tr><td>2</td><td>古文書庫で禁術を見つける</td></tr>
        <tr><td>3</td><td>夜の屋根上で追跡戦</td></tr>
        <tr><td>4</td><td>宴席で疑心暗鬼が広がる</td></tr>
        <tr><td>5</td><td>地下水路で奇襲を受ける</td></tr>
        <tr><td>6</td><td>夜明け前、決戦の鐘が鳴る</td></tr>
      </tbody>
    </table>
  </template>

  <script src="script.js"></script>
</body>
</html>
